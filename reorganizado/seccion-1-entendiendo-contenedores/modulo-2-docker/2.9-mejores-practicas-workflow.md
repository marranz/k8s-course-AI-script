# 2.9 Mejores Prácticas y Workflow

## Versionamiento de Imágenes

\`\`\`bash
# Usar semantic versioning
docker build -t myapp:1.2.3 .
docker tag myapp:1.2.3 myapp:1.2
docker tag myapp:1.2.3 myapp:1
docker tag myapp:1.2.3 myapp:latest
\`\`\`

## CI/CD Básico con GitHub Actions

\`\`\`yaml
name: Docker Build

on:
  push:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Build Docker image
        run: docker build -t myapp:${{ github.sha }} .
      
      - name: Run tests
        run: docker run myapp:${{ github.sha }} npm test
      
      - name: Push to registry
        run: |
          echo ${{ secrets.DOCKER_PASSWORD }} | docker login -u ${{ secrets.DOCKER_USERNAME }} --password-stdin
          docker push myapp:${{ github.sha }}
\`\`\`

## Workflow de Desarrollo

1. **Local Development**
   - Docker Compose para stack completo
   - Bind mounts para hot-reload

2. **Testing**
   - Build imagen
   - Run tests en contenedor
   - Scan vulnerabilidades

3. **Staging**
   - Deploy a entorno de staging
   - Tests de integración

4. **Production**
   - Tag con versión semántica
   - Push a registry
   - Deploy con rolling update

## Mejores Prácticas

- ✅ Versionar imágenes (no solo latest)
- ✅ Usar multi-stage builds
- ✅ Escanear vulnerabilidades
- ✅ Automatizar builds con CI/CD
- ✅ Documentar en README
- ✅ Usar .dockerignore
- ✅ Health checks siempre
- ✅ No ejecutar como root
- ✅ Logs estructurados
- ✅ Resource limits en producción
