# 2.2b Docker Desktop: GuÃ­a Completa

En sistemas operativos no Linux, es decir, mac y winows yo siempre recomiendo instalar docker desktop. Por quÃ©?

El curso esta orientado a que mas adelante despleguemos una infrastructura en kubernetes, para lo que vamos a usar servidores linux principalmente. 

Para entornos locales donde vamos a aprender a usar docker, docker desktop es la mejor opcion porque simplifica muchisimo la instalacion, pero oculta la gran complejidad de los componentes de docker que hemos explicado hasta ahora.

Si quereis simplemente aprender a usar docker, docker desktop es la mejor opcion, si quereis conocer que necesitais para tener docker funcionando entornos productivos, entonces os recomiendo instalar los componentes por separado.

## Â¿QuÃ© es Docker Desktop?

Docker Desktop es una aplicaciÃ³n nativa para Windows, macOS y Linux que proporciona:
- Docker Engine empaquetado y listo para usar
- Interfaz grÃ¡fica (GUI) para gestionar contenedores e imÃ¡genes
- Docker CLI integrado
- Docker Compose incluido
- Kubernetes local (opcional)
- Actualizaciones automÃ¡ticas
- IntegraciÃ³n con el sistema operativo

## Ventajas de Docker Desktop

### Para Desarrollo Local
- âœ… InstalaciÃ³n simplificada (un solo instalador)
- âœ… No necesitas configurar manualmente el daemon
- âœ… GestiÃ³n visual de recursos
- âœ… IntegraciÃ³n con IDEs (VS Code, IntelliJ)
- âœ… ComparticiÃ³n de archivos automÃ¡tica
- âœ… Networking configurado automÃ¡ticamente

### CaracterÃ­sticas Destacadas
- Dashboard visual intuitivo
- GestiÃ³n de recursos (CPU, RAM, disco)
- Kubernetes con un click
- Docker Compose UI integrada
- Extensiones (Beta)
- SincronizaciÃ³n de credenciales Docker Hub

## InstalaciÃ³n por Sistema Operativo

### Windows

#### Requisitos Previos
- Windows 10 64-bit: Pro, Enterprise o Education (Build 19041 o superior)
- O Windows 11 64-bit: Home o Pro (Build 22000 o superior)
- Habilitar WSL 2 (Windows Subsystem for Linux)
- VirtualizaciÃ³n habilitada en BIOS

#### Pasos de InstalaciÃ³n

1. **Descargar Docker Desktop**
   - Visita: https://www.docker.com/products/docker-desktop
   - Click en "Download for Windows"

2. **Instalar WSL 2** (si no estÃ¡ instalado)
   ```powershell
   # Ejecutar en PowerShell como Administrador
   wsl --install

   # Reiniciar el sistema
   # DespuÃ©s del reinicio, establecer WSL 2 como predeterminado
   wsl --set-default-version 2
   ```

3. **Ejecutar el Instalador**
   - Doble click en `Docker Desktop Installer.exe`
   - Marcar "Use WSL 2 instead of Hyper-V" (recomendado)
   - Click "Ok"
   - Esperar la instalaciÃ³n
   - Click "Close and restart"

4. **Primera EjecuciÃ³n**
   - Docker Desktop se iniciarÃ¡ automÃ¡ticamente
   - Acepta el acuerdo de servicio
   - Opcionalmente, inicia sesiÃ³n con tu Docker ID

5. **Verificar InstalaciÃ³n**
   ```powershell
   # En PowerShell o CMD
   docker --version
   docker-compose --version
   docker run hello-world
   ```

#### Troubleshooting Windows
- **Error: WSL 2 installation is incomplete**
  - Instala el kernel update: https://aka.ms/wsl2kernel

- **Error: Hardware assisted virtualization**
  - Habilita virtualizaciÃ³n en BIOS (VT-x/AMD-V)

- **Docker Desktop won't start**
  - Verifica que WSL 2 estÃ© corriendo: `wsl --status`
  - Reinicia el servicio: Settings â†’ Reset â†’ Restart Docker Desktop

### macOS

#### Requisitos Previos
- macOS 11 Big Sur o superior
- Mac con chip Apple Silicon (M1/M2) o Intel
- MÃ­nimo 4GB RAM

#### Pasos de InstalaciÃ³n

1. **Descargar Docker Desktop**
   - Visita: https://www.docker.com/products/docker-desktop
   - Descarga la versiÃ³n correcta:
     - "Docker Desktop for Mac with Apple Silicon"
     - "Docker Desktop for Mac with Intel chip"

2. **Instalar**
   - Abre el archivo `Docker.dmg` descargado
   - Arrastra el icono de Docker a la carpeta Applications
   - Abre Docker desde Applications

3. **Permisos**
   - macOS pedirÃ¡ tu contraseÃ±a para instalar componentes
   - Acepta los permisos necesarios

4. **Primera EjecuciÃ³n**
   - Docker Desktop aparecerÃ¡ en la barra de menÃº (ğŸ³)
   - Acepta el acuerdo de servicio
   - Completa el tutorial opcional

5. **Verificar InstalaciÃ³n**
   ```bash
   # En Terminal
   docker --version
   docker-compose --version
   docker run hello-world
   ```

#### Troubleshooting macOS
- **Docker Desktop is starting loop**
  - Borra configuraciones: `rm -rf ~/Library/Group\ Containers/group.com.docker`
  - Reinicia Docker Desktop

- **Slow performance on M1/M2**
  - AsegÃºrate de usar la versiÃ³n Apple Silicon
  - Habilita VirtioFS en Settings â†’ Experimental Features

### Linux

#### Requisitos Previos
- Ubuntu 20.04/22.04, Debian 11, Fedora 37/38
- Arquitectura x86_64/amd64
- KVM support
- QEMU 5.2 o superior

#### Pasos de InstalaciÃ³n (Ubuntu/Debian)

1. **Descargar Docker Desktop**
   ```bash
   # Descargar el paquete .deb
   wget https://desktop.docker.com/linux/main/amd64/docker-desktop-<version>-amd64.deb
   ```

2. **Instalar Dependencias**
   ```bash
   sudo apt-get update
   sudo apt-get install -y \
     ca-certificates \
     curl \
     gnupg \
     lsb-release
   ```

3. **Instalar Docker Desktop**
   ```bash
   sudo apt-get install ./docker-desktop-<version>-amd64.deb
   ```

4. **Iniciar Docker Desktop**
   ```bash
   systemctl --user start docker-desktop

   # O desde el menÃº de aplicaciones
   ```

5. **Verificar InstalaciÃ³n**
   ```bash
   docker --version
   docker-compose --version
   docker run hello-world
   ```

#### Troubleshooting Linux
- **Permission denied on /var/run/docker.sock**
  ```bash
  sudo usermod -aG docker $USER
  newgrp docker
  ```

## Tour de la Interfaz GrÃ¡fica

### Dashboard Principal

Cuando abres Docker Desktop, ves:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Docker Desktop                    [âš™ï¸] [ğŸ‘¤]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‹ Containers (3)                              â”‚
â”‚  ğŸ“¦ Images (8)                                  â”‚
â”‚  ğŸ“š Volumes (2)                                 â”‚
â”‚  ğŸ”Œ Dev Environments                            â”‚
â”‚  ğŸ§© Extensions                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### PestaÃ±a Containers

**Vista de contenedores activos:**
- Nombre del contenedor
- Estado (Running, Stopped)
- Puerto mapeado
- Botones de acciÃ³n:
  - â–¶ï¸ Start / â¸ï¸ Stop
  - ğŸ”„ Restart
  - ğŸ—‘ï¸ Delete
  - ğŸ“„ Logs
  - ğŸ–¥ï¸ CLI (abrir terminal)
  - ğŸ“Š Stats (estadÃ­sticas)

**Acciones comunes:**

1. **Ver logs en tiempo real**
   - Click en el contenedor
   - PestaÃ±a "Logs"
   - Scroll automÃ¡tico activado

2. **Abrir terminal dentro del contenedor**
   - Click en el contenedor
   - PestaÃ±a "Terminal" o botÃ³n CLI
   - Ejecuta comandos interactivos

3. **Ver estadÃ­sticas**
   - PestaÃ±a "Stats"
   - CPU, memoria, red, disco en tiempo real

### PestaÃ±a Images

**GestiÃ³n de imÃ¡genes:**
- Lista de imÃ¡genes locales
- TamaÃ±o de cada imagen
- Etiquetas (tags)
- Fecha de creaciÃ³n

**Acciones:**
- ğŸš€ Run (crear contenedor desde imagen)
- ğŸ—‘ï¸ Delete
- ğŸ” Inspect (ver detalles)
- ğŸ·ï¸ Tag (etiquetar imagen)
- â¬†ï¸ Push (subir a registry)

**Buscar imÃ¡genes en Docker Hub:**
- Barra de bÃºsqueda superior
- Resultados de Docker Hub
- Pull directo desde la UI

### PestaÃ±a Volumes

**GestiÃ³n de volÃºmenes:**
- Lista de volÃºmenes creados
- TamaÃ±o utilizado
- Contenedores que los usan

**Acciones:**
- ğŸ—‘ï¸ Delete
- ğŸ” Inspect
- ğŸ“ Browse data (explorar archivos del volumen)

### Dev Environments (Beta)

Entornos de desarrollo colaborativos:
- Clonar repositorios
- ConfiguraciÃ³n automÃ¡tica
- Compartir con equipo

### Extensions (Beta)

Extensiones de terceros:
- Disk usage analyzer
- Logs explorer
- Resource monitor
- Snyk security scanning

## ConfiguraciÃ³n y Settings

### General

**Opciones principales:**
- â˜‘ï¸ Start Docker Desktop when you log in
- â˜‘ï¸ Use Docker Compose V2
- Choose theme (Light/Dark/System)

### Resources

#### **CPU**
- Asignar nÃºmero de nÃºcleos
- Recomendado: 2-4 CPUs para desarrollo

#### **Memory**
- Asignar RAM dedicada
- Recomendado: 4-8 GB para desarrollo
- Cuidado: no asignar mÃ¡s del 75% de tu RAM total

#### **Disk**
- UbicaciÃ³n de imÃ¡genes y contenedores
- TamaÃ±o mÃ¡ximo del disco virtual
- OpciÃ³n: Clean / Purge data

#### **File Sharing** (macOS/Windows)
- Directorios compartidos entre host y contenedores
- Por defecto: home directory
- AÃ±adir rutas adicionales si necesario

### Docker Engine

Editor JSON de configuraciÃ³n del daemon:
```json
{
  "builder": {
    "gc": {
      "enabled": true,
      "defaultKeepStorage": "20GB"
    }
  },
  "experimental": false,
  "features": {
    "buildkit": true
  }
}
```

### Kubernetes

**Habilitar Kubernetes local:**
- â˜‘ï¸ Enable Kubernetes
- Esperar instalaciÃ³n (primera vez: 5-10 minutos)
- kubectl configurado automÃ¡ticamente

**Uso:**
```bash
# Verificar que Kubernetes estÃ¡ activo
kubectl cluster-info
kubectl get nodes

# Contexto docker-desktop
kubectl config current-context
```

**Ventajas:**
- Cluster local para testing
- Sin configuraciÃ³n adicional
- Reseteable desde Settings

**Desventajas:**
- Consume recursos (2GB+ RAM)
- Single-node cluster
- No recomendado para producciÃ³n

### Extensions

**Instalar extensiones:**
- Browse Marketplace
- Click "Install"
- Reinicia Docker Desktop si necesario

**Extensiones populares:**
- **Disk usage:** Analizar espacio usado
- **Logs Explorer:** Buscar en logs
- **Resource Usage:** Monitor avanzado

## IntegraciÃ³n con Docker Compose

### Desde la UI

1. **Ver stacks de Compose**
   - PestaÃ±a "Containers"
   - Contenedores agrupados por proyecto

2. **Acciones de grupo**
   - Start/Stop todo el stack
   - Ver logs combinados
   - Delete completo

### Desde Terminal Integrada

Docker Desktop incluye terminal integrada:
- Settings â†’ Command Line
- Acceso rÃ¡pido a docker y docker-compose

## Uso con VS Code

### Docker Extension para VS Code

**InstalaciÃ³n:**
1. Abre VS Code
2. Extensions â†’ Busca "Docker"
3. Instala "Docker" (Microsoft)

**CaracterÃ­sticas:**
- Explorador de contenedores/imÃ¡genes/registries
- Click derecho para acciones comunes
- GeneraciÃ³n automÃ¡tica de Dockerfiles
- Debug de contenedores

**Workflow:**
```bash
# En VS Code:
1. Abrir proyecto
2. Cmd/Ctrl + Shift + P
3. "Docker: Add Docker Files to Workspace"
4. Seguir wizard
5. F5 para debug
```

## Mejores PrÃ¡cticas

### GestiÃ³n de Recursos

1. **No sobre-asignar recursos**
   - Deja recursos para el sistema operativo
   - Ajusta segÃºn necesidad real

2. **Limpieza regular**
   ```bash
   # Desde terminal
   docker system prune -a

   # Desde UI
   Settings â†’ Resources â†’ Disk â†’ Clean / Purge data
   ```

3. **Monitorea espacio en disco**
   - Dashboard muestra uso total
   - Instala extensiÃ³n "Disk usage"

### Seguridad

1. **Actualiza regularmente**
   - Docker Desktop notifica actualizaciones
   - Settings â†’ Software Updates

2. **No ejecutes como root** (Linux)
   - Usa rootless mode cuando sea posible

3. **Escanea imÃ¡genes**
   - Click derecho en imagen â†’ "Scan image"
   - Instala extensiÃ³n Snyk

### Rendimiento

#### Windows (WSL 2)
- Coloca proyectos dentro de WSL filesystem (`\\wsl$\Ubuntu\home\...`)
- No uses filesystem de Windows (`C:\...`) para mejor rendimiento

#### macOS
- Usa VirtioFS (habilitado por defecto en versiones recientes)
- Limita File Sharing solo a directorios necesarios

#### Linux
- Considera usar Docker Engine nativo para mÃ¡ximo rendimiento
- Docker Desktop en Linux es mÃ¡s pesado (usa VM)

## Troubleshooting ComÃºn

### Docker Desktop no inicia

**Windows:**
```powershell
# Verificar WSL
wsl --status

# Reiniciar WSL
wsl --shutdown
# Luego reinicia Docker Desktop
```

**macOS:**
```bash
# Resetear configuraciÃ³n
rm -rf ~/Library/Group\ Containers/group.com.docker
```

**Linux:**
```bash
# Verificar servicio
systemctl --user status docker-desktop

# Reiniciar
systemctl --user restart docker-desktop
```

### Contenedores no se conectan a internet

1. Verifica configuraciÃ³n DNS
   - Settings â†’ Docker Engine
   ```json
   {
     "dns": ["8.8.8.8", "8.8.4.4"]
   }
   ```

2. Reinicia Docker Desktop

### Rendimiento lento

1. **Aumenta recursos** (Settings â†’ Resources)
2. **Limpia datos no usados**
   ```bash
   docker system prune -a --volumes
   ```
3. **Desactiva Kubernetes** si no lo usas

### Error "No space left on device"

```bash
# Ver espacio usado
docker system df

# Limpiar
docker system prune -a --volumes

# O desde UI: Settings â†’ Resources â†’ Disk â†’ Clean
```

## ComparaciÃ³n: CLI vs Docker Desktop

| Tarea | CLI | Docker Desktop |
|-------|-----|----------------|
| Ver contenedores | `docker ps` | Click en Containers |
| Ver logs | `docker logs -f <id>` | Click â†’ Logs tab |
| Abrir terminal | `docker exec -it <id> bash` | Click â†’ Terminal |
| Ver estadÃ­sticas | `docker stats` | Click â†’ Stats tab |
| Gestionar imÃ¡genes | `docker images`, `docker rmi` | Images tab â†’ Delete |
| BÃºsqueda Hub | `docker search` | Search bar â†’ Pull |
| Ver uso disco | `docker system df` | Dashboard o Extension |

**RecomendaciÃ³n:**
- Usa CLI para automatizaciÃ³n y scripts
- Usa GUI para exploraciÃ³n y debugging visual

## Alternativas a Docker Desktop

### Â¿Por quÃ© considerar alternativas?

- **Licencia:** Docker Desktop requiere licencia de pago para empresas grandes (>250 empleados o >$10M revenue)
- **Recursos:** Docker Desktop consume mÃ¡s recursos
- **Control:** Alternativas dan mÃ¡s control fino

### Opciones

#### 1. Docker Engine (Linux nativo)
```bash
# Instalar solo Docker Engine
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
```

**Pros:** Ligero, rÃ¡pido, gratis
**Cons:** Sin GUI, solo Linux

#### 2. Rancher Desktop
- GUI similar a Docker Desktop
- Gratis y open source
- Usa containerd o dockerd
- Kubernetes incluido

#### 3. Podman Desktop
- Alternativa completa a Docker
- Rootless por defecto
- Compatible con comandos Docker

#### 4. Colima (macOS)
```bash
brew install colima
colima start
```

**Pros:** Ligero, gratis
**Cons:** Solo CLI, solo macOS

## ConclusiÃ³n

Docker Desktop es ideal para:
âœ… Desarrollo local
âœ… Principiantes en contenedores
âœ… Necesidad de GUI intuitiva
âœ… Equipos pequeÃ±os (<250 empleados)
âœ… IntegraciÃ³n con IDEs

Considera alternativas si:
âš ï¸ Empresa grande (licencia comercial)
âš ï¸ Recursos limitados
âš ï¸ Necesitas mÃ¡ximo rendimiento
âš ï¸ Solo trabajas con CLI

## Recursos Adicionales

- [DocumentaciÃ³n oficial](https://docs.docker.com/desktop/)
- [Release notes](https://docs.docker.com/desktop/release-notes/)
- [Docker Desktop vs Docker Engine](https://docs.docker.com/desktop/faqs/general/)
- [Extensiones Marketplace](https://hub.docker.com/search?q=&type=extension)
